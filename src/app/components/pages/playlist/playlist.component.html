<app-loading class="m-5" *ngIf="loading"></app-loading>

<div class="row" *ngIf="!loading">
    <div class="col s12 m12">
        <div class="card blue-grey darken-1">
            <div class="card-content white-text">
                <div class="row">
                    <div class="col s2 m2">
                        <img src="{{ playlists.images[0].url }}" style="width: 90%;">
                    </div>
                    <div class="col s10 m10">
                        <span class="card-title">Playlist: {{ playlists.name }}</span>
                         <p>{{ playlists.external_urls.spotify }}</p>
                    </div>
                </div>
            </div>
            <div class="card-action">
                <span>Tracks: {{ playlists.tracks.total }}</span>   
            </div> 
              
            <table>
                <thead>
                <tr>
                    <th>Name</th>
                    <th>Album</th>
                    <th>Artist</th>
                    <th>Listen</th>
                </tr>
                </thead>

                <tbody>
                    <tr *ngFor="let track of playlists.tracks.items">
                        <td>{{ track.track.name }}</td>
                        <td>{{ track.track.album.name }}</td>
                        <td>{{ track.track.artists[0].name }}</td>    
                        <td>
                            <button (click)="listen(track.track.name, track.track.preview_url)" data-target="modal1" class="btn-floating modal-trigger">
                                <i class="material-icons">play_arrow</i>
                            </button>
                        </td>               
                    </tr>                
                </tbody>
            </table>                

        </div>      

    </div>
</div>

<!-- Modal Structure -->
<div id="modal1" class="modal">
  <div class="modal-content">
    <h4>{{ track_name }}</h4>
    <audio [src]="preview_url" controls></audio>
  </div>
  <div class="modal-footer">
    <a class="modal-close waves-effect waves-green btn-flat">CLOSE</a>
  </div>
</div>